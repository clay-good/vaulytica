<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vaulytica Dashboard - AI-Powered Security Analysis</title>
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.4.4/build/global/luxon.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.3.1/dist/chartjs-adapter-luxon.umd.min.js"></script>
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-content">
                <h1>üõ°Ô∏è Vaulytica Dashboard</h1>
                <p class="subtitle">AI-Powered Security Event Analysis v0.11.0</p>
            </div>
            <div class="header-status">
                <span class="status-indicator" id="connection-status">
                    <span class="status-dot"></span>
                    <span class="status-text">Connected</span>
                </span>
                <span class="last-update">Last update: <span id="last-update-time">--:--:--</span></span>
            </div>
        </header>

        <!-- Statistics Cards -->
        <section class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">üìä</div>
                <div class="stat-content">
                    <div class="stat-value" id="total-events">0</div>
                    <div class="stat-label">Total Events</div>
                    <div class="stat-change" id="events-24h">0 in last 24h</div>
                </div>
            </div>

            <div class="stat-card critical">
                <div class="stat-icon">üö®</div>
                <div class="stat-content">
                    <div class="stat-value" id="critical-events">0</div>
                    <div class="stat-label">Critical Events</div>
                    <div class="stat-change" id="high-events">0 high severity</div>
                </div>
            </div>

            <div class="stat-card warning">
                <div class="stat-icon">‚ö†Ô∏è</div>
                <div class="stat-content">
                    <div class="stat-value" id="anomalies-detected">0</div>
                    <div class="stat-label">Anomalies Detected</div>
                    <div class="stat-change" id="ml-accuracy">0% ML accuracy</div>
                </div>
            </div>

            <div class="stat-card success">
                <div class="stat-icon">ü§ñ</div>
                <div class="stat-content">
                    <div class="stat-value" id="threats-predicted">0</div>
                    <div class="stat-label">Threats Predicted</div>
                    <div class="stat-change" id="playbooks-executed">0 playbooks executed</div>
                </div>
            </div>
        </section>

        <!-- Charts Section -->
        <section class="charts-section">
            <div class="chart-container">
                <div class="chart-header">
                    <h2>üìà Event Timeline (24 Hours)</h2>
                    <div class="chart-legend">
                        <span class="legend-item"><span class="legend-dot critical"></span> Critical</span>
                        <span class="legend-item"><span class="legend-dot high"></span> High</span>
                        <span class="legend-item"><span class="legend-dot anomaly"></span> Anomalies</span>
                    </div>
                </div>
                <canvas id="timeline-chart"></canvas>
            </div>

            <div class="chart-container">
                <div class="chart-header">
                    <h2>üéØ Severity Distribution</h2>
                </div>
                <canvas id="severity-chart"></canvas>
            </div>
        </section>

        <!-- Recent Events Table -->
        <section class="events-section">
            <div class="section-header">
                <h2>üîç Recent Security Events</h2>
                <div class="section-controls">
                    <button class="btn btn-secondary" onclick="refreshEvents()">üîÑ Refresh</button>
                    <select id="severity-filter" onchange="filterEvents()">
                        <option value="all">All Severities</option>
                        <option value="CRITICAL">Critical</option>
                        <option value="HIGH">High</option>
                        <option value="MEDIUM">Medium</option>
                        <option value="LOW">Low</option>
                    </select>
                </div>
            </div>

            <div class="events-table-container">
                <table class="events-table">
                    <thead>
                        <tr>
                            <th>Time</th>
                            <th>Severity</th>
                            <th>Category</th>
                            <th>Title</th>
                            <th>Source</th>
                            <th>ML Score</th>
                            <th>Threat Level</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="events-table-body">
                        <tr>
                            <td colspan="9" class="no-data">No events yet. Waiting for data...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- ML Insights Panel -->
        <section class="insights-section">
            <div class="section-header">
                <h2>ü§ñ ML Engine Insights</h2>
            </div>
            <div class="insights-grid">
                <div class="insight-card">
                    <div class="insight-label">Total Predictions</div>
                    <div class="insight-value" id="ml-predictions">0</div>
                </div>
                <div class="insight-card">
                    <div class="insight-label">Anomaly Rate</div>
                    <div class="insight-value" id="ml-anomaly-rate">0%</div>
                </div>
                <div class="insight-card">
                    <div class="insight-label">Threat Rate</div>
                    <div class="insight-value" id="ml-threat-rate">0%</div>
                </div>
                <div class="insight-card">
                    <div class="insight-label">Training Samples</div>
                    <div class="insight-value" id="ml-training-samples">0</div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="dashboard-footer">
            <p>Vaulytica v0.11.0 - AI-Powered Security Event Analysis Framework</p>
            <p>Built with ‚ù§Ô∏è by world-class software engineers</p>
        </footer>
    </div>

    <script src="/static/js/dashboard.js"></script>
</body>
</html>

